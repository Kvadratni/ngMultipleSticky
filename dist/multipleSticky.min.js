!function(){"use strict";var t=angular.module("sticky",[]);t.directive("sticky",function(){function t(t,e,o){function s(){if(x.offsetWidth=v.offsetWidth,f(),i(),O){var t=window.getComputedStyle(v.parentElement,null),o=v.parentElement.offsetWidth-t.getPropertyValue("padding-right").replace("px","")-t.getPropertyValue("padding-left").replace("px","");e.css("width",o+"px")}}function n(){b.off("scroll",i),b.off("resize",s),u&&C.removeClass(u),E&&E.remove()}function i(){var o,s,n,i;if(!d||P("("+d+")").matches||P(d).matches)if(y&&(B+=W,W=a(),B-=W),"top"===I?(i=window.pageYOffset||k.scrollTop,o=i-(k.clientTop||0),s=L===!0?o>=B&&H>=o:o>=B):(n=window.pageYOffset+window.innerHeight,s=B>=n),s&&!O)c();else if(!s&&O){var p,l,m;l=[B,H],m=r(l,o),m==B?p="top":m==H&&(p="bottom"),f(p,o)}else s&&O&&((-1!=g||0!=w)&&("top"===I&&(t.Stickying.Top.length>=g&&-1!=g||o>=w)?e.addClass(h):t.Stickying.Bottom.length>=g&&-1!=g||n>=w?e.addClass(h):e.removeClass(h)),y&&e.css(I,W+"px"))}function r(t,e){var o,s=0,n=1e3;for(s in t){var i=Math.abs(e-t[s]);n>i&&(n=i,o=t[s])}return o}function a(){var o=0,s=0;if("bottom"===I)var n=t.Stickying.Bottom,i="bottom";else var n=t.Stickying.Top,i="top";var r=-1!=n.indexOf(e)?n.indexOf(e):n.length;for(o;r>o;o++){var a=(parseInt(n[o].css(i).replace(/px;?/,""))||0)-s;s+=n[o][0].offsetHeight+a}return s}function c(){var o,s;if(o=e[0].getBoundingClientRect(),s=o.left,x.offsetWidth=v.offsetWidth,O=!0,u&&C.addClass(u),m&&e.addClass(m),e.css("width",v.offsetWidth+"px").css("position","fixed").css(I,W+"px").css("left",s).css("margin-top",0),"bottom"===I?(e.css("margin-bottom",0),t.Stickying.Bottom.push(e)):t.Stickying.Top.push(e),$){console.log("use placeholder!"),E=angular.element("<div>");var n=e[0].offsetHeight;E.css("height",n+"px"),e.after(E)}}function f(o){e.attr("style",e.initialStyle),O=!1,u&&C.removeClass(u),m&&e.removeClass(m),e.removeClass(h),"top"==o?e.css("width","").css("top",x.top).css("position",x.position).css("left",x.cssLeft).css("margin-top",x.marginTop):"bottom"==o&&L===!0&&e.css("width","").css("top","").css("bottom",0).css("position","absolute").css("left",x.cssLeft).css("margin-top",x.marginTop).css("margin-bottom",x.marginBottom),"bottom"===I?t.Stickying.Bottom.splice(e):t.Stickying.Top.splice(e),E&&E.remove()}function p(t){var e=0;if(t.offsetParent)do e+=t.offsetTop,t=t.offsetParent;while(t);return e}function l(t){return t.offsetTop+t.clientHeight}var d,m,u,g,h,w,y,v,b,C,k,x,T,S,O,B,H,W,I,L,M,P,$,E;switch(S=!1,O=!1,P=window.matchMedia,b=angular.element(window),C=angular.element(document.body),v=e[0],k=document.documentElement,d=o.mediaQuery||!1,m=o.stickyClass||"",u=o.bodyClass||"",h=o.compactClass||"",$=void 0==o.useplaceholder?!1:!0,T=e.attr("style"),g="string"==typeof o.compactOnCount?parseInt(o.compactOnCount):-1,w="string"==typeof o.compactOffset?parseInt(o.compactOffset.replace(/px;?/,"")):0,W="string"==typeof o.offset?parseInt(o.offset.replace(/px;?/,"")):0,I="string"==typeof o.anchor?o.anchor.toLowerCase().trim():"top",L="string"==typeof o.confine?o.confine.toLowerCase().trim():"false",L="true"===L,y="string"==typeof o.ensureOffset?o.ensureOffset.toLowerCase().trim():"false",y="true"===y,x={top:e.css("top"),width:e.css("width"),position:e.css("position"),marginTop:e.css("margin-top"),cssLeft:e.css("left")},I){case"top":case"bottom":break;default:console.log("Unknown anchor "+I+", defaulting to top"),I="top"}b.on("scroll",i),b.on("resize",t.$apply.bind(t,s)),t.$on("$destroy",n),M=p(v),t.$watch(function(){return O?M:M="top"===I?p(v):l(v)},function(t,o){if(t!==o||"undefined"==typeof B){B=t-W,L&&e.parent().css({position:"relative"});var s=e.parent()[0];console.log(s.offsetHeight);var n=parseInt(s.offsetHeight),r=parseInt(e.css("margin-bottom").replace(/px;?/,""))||0;H=n-(v.offsetTop+v.offsetHeight)+W+r,i()}})}return{restrict:"A",controller:function(t){t.Stickying={Top:[],Bottom:[]},this.config=function(){return t.Stickying}},link:t}}),window.matchMedia=window.matchMedia||function(){var t="angular-sticky: This browser does not support matchMedia, therefore the minWidth option will not work on this browser. Polyfill matchMedia to fix this issue.";return window.console&&console.warn&&console.warn(t),function(){return{matches:!0}}}()}();